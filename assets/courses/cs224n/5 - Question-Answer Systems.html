
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      common.css
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="titlearea">
        <h2>CS224n Lecture 10 - QA Systems</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><div><b>Question Answering</b></div><div>Question Answering systems typically have two parts</div><div>&nbsp;1. Finding documents that (might) contain an answer using standard information retrieval methods.</div><div>&nbsp;2. Performing Reading Comprehension on the text to isolate the answer.</div><div><br></div><div>Reading Comprehension</div><div>&nbsp; - A machine comprehends a passage of text if for any question regarding that text that can be answered correctly by a majority of native speakers, the machine can provide a string which those speakers would agree both answers that question and does not contain information irrevlevant to that question.</div><div><br></div><div><b>SQuAD</b></div><div>Question, Passage, and Answer. The answer is a subsequence of words in the passage (aka extractive QA).</div><div>Authors collected 3 gold answers.</div><div><br></div><div>Evaluation:</div><div>&nbsp; - Exact match to one of the 3 human answers</div><div>&nbsp; - F1: Take system and each gold answer as bag of words, compute precision=tp/(tp+fp), recall=tp/(tp+tn), harmonic mean f1 score=2PR/(P+R). Score is macro-average of per-qiestion F1 scores.</div><div>&nbsp; - Both metrics ignore ‘a’, ‘an’, ’the’, and punctuation. F1 is preferred over Exact.</div><div><br></div><div>SQuAD 1.0 always had an answer in the passage, SQuAD 2.0 have half of the questions have answers and half of them don’t have answers. No answer is a possible answer. A lot of systems can’t get the ’no answer’ right.</div><div><br></div><div>Limitations of SQuAD - All questions with an answer is a span in the passage. No counting questions, relational questions, implicit questions,&nbsp;</div><div>Barely any multi-fact/sentence inference beyond coreference.</div><div><b><br></b></div><div><b>Stanford Attentive Reader (Old Model, Danqi 2014)</b></div><div>The simplest Neural QA system that works pretty well.</div><div>They an an embedding of the question by taking word embeddings for each word in the question and running a bi-LSTM (two LSTMs, one forward, one backaward), and concatenate the final hidden states.</div><div><br></div><div>They embed each word the passage in the same way (concatenated bi-LSTM hidden states). Note that each word is embedded as the concatenaton of the hidden states of both of the LSTMs, reading from the start and the end of the passage respectively until that word. (instead of just appending the last hidden staes)</div><div><br></div><div>They use the question embedding and obtain an attention distribution by comparing the question embedding and each word’s bi-LSTM embedding using (multiplicative) attention.</div><div><br></div><div>Actually two attention distrbutions are generated with the same equation below but different weights. As it turns out one is trained to recognize the start of the answer span, and another attention distribution trained to recognize the end of the answer span.</div><div><br></div><div>(If the relevant info is in the middle of the span, the bi-LSTM will push it out to the start and end of the span).</div><div></div></div><div class="cell markdown-cell"><p></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-167-Frame" style=""><nobr><span class="math" id="MathJax-Span-5894" style="width: 10.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.741em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.49em, 1000em, 2.951em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-5895"><span class="msubsup" id="MathJax-Span-5896"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5897" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-5898" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5899" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-5900" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">s</span><span class="mi" id="MathJax-Span-5901" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-5902" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mi" id="MathJax-Span-5903" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span><span class="mi" id="MathJax-Span-5904" style="font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-5905" style="font-family: STIXGeneral-Italic;">a</span><span class="msubsup" id="MathJax-Span-5906"><span style="display: inline-block; position: relative; width: 0.804em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.534em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5907" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.504em;"><span class="mi" id="MathJax-Span-5908" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5909" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-5910"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5911" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.507em;"><span class="mi" id="MathJax-Span-5912" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-5913"><span style="display: inline-block; position: relative; width: 1.297em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.721em, -0.436em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5914" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.884em;"><span class="mi" id="MathJax-Span-5915" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-5916"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(3.141em, 1000em, 4.372em, -0.785em); top: -3.998em; left: 0em;"><span class="texatom" id="MathJax-Span-5917"><span class="mrow" id="MathJax-Span-5918"><span class="munderover" id="MathJax-Span-5919"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.908em, -0.582em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5920" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -4.048em; left: 0.117em;"><span style="height: 0em; vertical-align: 0em; width: 0.395em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-5921" style="font-family: STIXGeneral-Regular; margin-left: -0.395em;">̃&nbsp;<span style="height: 0em; vertical-align: 0em; margin-left: -0.676em;"></span></span><span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.563em;"><span class="mi" id="MathJax-Span-5922" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5923" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.371em; vertical-align: -0.338em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-167">a_i = softmax_i (q^T W_s \tilde p_i)</script><p></p>
</div><div class="cell text-cell"></div><div class="cell text-cell"><div><br></div><div><img src="resources/724D93B4265B27E6DD355A1DD32FEF74.png" alt="Screenshot 2020-01-23 at 10.46.39 PM.png" width="558" height="389"><br></div><div><img src="resources/0BE118864ADA8BE0DD489EA3D5879F93.png" alt="Screenshot 2020-01-23 at 10.52.02 PM.png" width="541" height="419"><br></div><div><br></div><div>Danqi (model’s author, stanford phd student) added some things to make the model better:&nbsp;</div><div>Stanford attentive reader ++</div><div>&nbsp;1. Instead of just concatenating the end states of the bi-LSTM for the question embedding, use attention to compute a weighted average of the hidden states for all the words to form the question embedding. The attention is dot-product attention computed with respect to a <b>sentinel</b>, or random vector.&nbsp;</div><div>So the dot product of every word’s bi-LSTM embedding is taken with respect to a random vector and a softmax is applied to get an attention distribution, which is then used as a weighted sum to add up the vectors to compute the question embedding.</div><div>2. She used a 3-layer bi-LSTM</div><div>3. For the passage representation, instead of only using GloVe word embeddings, she also concatenated one-hot encoded POS and NER tags, term frequency (unigram probability), exact match (whether the word appears in the question, with three cases: exact, uncased, lemma), and aligned question embedding (‘car’ vs ‘vehicle’) with the alignment computed as below:</div><div></div></div><div class="cell markdown-cell"><p><span class="MathJax" id="MathJax-Element-168-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5924" style="width: 5.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.786em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 3.093em, -0.508em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-5925"><span class="mi" id="MathJax-Span-5926" style="font-family: STIXGeneral-Italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mo" id="MathJax-Span-5927" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-5928"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.908em, -0.582em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5929" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.563em;"><span class="mi" id="MathJax-Span-5930" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5931" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-5932" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-5933" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mo" id="MathJax-Span-5934" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-5935"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5936" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-5937" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5938" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.309em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-168">E(p_i), E(q_j)</script> below is the embedding of a single word in the passage and question, respectively. Each of these is run through a single layer NN and you're softmaxing it to get a similarity score.</p>
</div><div class="cell text-cell"><div><img src="resources/19094783560CDB0316B9146764C0A2EC.png" alt="Screenshot 2020-01-23 at 11.04.59 PM.png" width="586" height="103"><br></div><div><br></div><div>&nbsp;Neural models do better because they can do better semantic matching of word similarities or rephrasing of things tha tmean the smae but dont use the same words. (better ‘paraphrasing’)</div><div><b><br></b></div><div style="font-size: 16px;"><b>BiDAF QA System&nbsp;</b></div><div>Another very popular old QA system that a lot of people have built off</div><div><img src="resources/3F24CEC822C07B6EF30BFB64C5183F05.png" alt="Screenshot 2020-01-23 at 11.11.35 PM.png" width="1120" height="811"><br></div><div>The attention flow is their central innovation (BiDAF is BiDirectional Attention Flow).&nbsp;</div><div>Idea: Attention should flow both ways - from the context to the question and from the question to the context. You should have passage words that map through attention to question words and question words that map through attention to passage words, and if you do that in both directions, and then run another round of sequence models on top of that you’d be able to do a lot better matching than either one of them. &nbsp;</div><div><br></div><div>BiDAF has a deep (3-layer) bi-LSTM (using both character level adn word level embeddings) as its base layer. The attention flow layer is on top of that.</div><div></div></div><div class="cell markdown-cell"><h3>The Attention Flow Layer</h3>
<p>The attention flow layer reparameterizes the context words taking into account the query. For every word, the reparameterization consists of the original context embedding, an embedding formed by weigted average of important query words (computed through C2Q attention), a 'hint' about the interactions of the above two embeddings, and an amplification of important context words (computed through Q2C attention).</p>
<p>For each pair of context embeddings <span class="MathJax" id="MathJax-Element-169-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5939" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5940"><span class="msubsup" id="MathJax-Span-5941"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5942" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5943" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-169">c_i</script> and query embeddings <span class="MathJax" id="MathJax-Element-170-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5944" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.756em, -0.482em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5945"><span class="msubsup" id="MathJax-Span-5946"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5947" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-5948" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.048em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-170">q_j</script>, make similarity score using a learned weight vector <span class="MathJax" id="MathJax-Element-171-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5949" style="width: 2.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.914em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.221em, 1000em, 2.672em, -0.492em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5950"><span class="msubsup" id="MathJax-Span-5951"><span style="display: inline-block; position: relative; width: 1.877em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.721em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5952" style="font-family: STIXGeneral-Italic;">w</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.465em); top: -2.653em; left: 0.732em;"><span class="mi" id="MathJax-Span-5953" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.487em, -0.495em); top: -2.011em; left: 0.732em;"><span class="texatom" id="MathJax-Span-5954"><span class="mrow" id="MathJax-Span-5955"><span class="mi" id="MathJax-Span-5956" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-5957" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-5958" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.361em; vertical-align: -0.403em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-171">w_{sim}^T</script> as follows:</p>
<p></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-172-Frame" style=""><nobr><span class="math" id="MathJax-Span-5959" style="width: 13.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.824em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.559em, 1000em, 3.093em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-5960"><span class="msubsup" id="MathJax-Span-5961"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5962" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-5963"><span class="mrow" id="MathJax-Span-5964"><span class="mi" id="MathJax-Span-5965" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-5966" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5967" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="msubsup" id="MathJax-Span-5968" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.877em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.721em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5969" style="font-family: STIXGeneral-Italic;">w</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.465em); top: -2.653em; left: 0.732em;"><span class="mi" id="MathJax-Span-5970" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.487em, -0.495em); top: -2.011em; left: 0.732em;"><span class="texatom" id="MathJax-Span-5971"><span class="mrow" id="MathJax-Span-5972"><span class="mi" id="MathJax-Span-5973" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-5974" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-5975" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5976" style="font-family: STIXGeneral-Regular;">[</span><span class="msubsup" id="MathJax-Span-5977"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5978" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5979" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5980" style="font-family: STIXGeneral-Regular;">;</span><span class="msubsup" id="MathJax-Span-5981" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5982" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-5983" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5984" style="font-family: STIXGeneral-Regular;">;</span><span class="msubsup" id="MathJax-Span-5985" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5986" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5987" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5988" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">∘</span><span class="msubsup" id="MathJax-Span-5989" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5990" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-5991" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-5992" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-5993" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mi" id="MathJax-Span-5994" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">R</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.454em; vertical-align: -0.496em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-172">S_{ij} = w^T_{sim}[c_i;q_j;c_i \circ q_j ] \in R</script><br>
where <span class="MathJax" id="MathJax-Element-173-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5995" style="width: 0.453em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.394em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.978em, 1000em, 2.586em, -0.467em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-5996"><span class="mo" id="MathJax-Span-5997" style="font-family: STIXGeneral-Regular;">∘</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.425em; vertical-align: 0.067em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-173">\circ</script> is the Hadamard or elemnt-wise product.<p></p>
<p>(Note: <span class="MathJax" id="MathJax-Element-174-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5998" style="width: 2.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.914em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.524em, -0.492em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5999"><span class="msubsup" id="MathJax-Span-6000"><span style="display: inline-block; position: relative; width: 1.877em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.721em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6001" style="font-family: STIXGeneral-Italic;">w</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="texatom" id="MathJax-Span-6002"><span class="mrow" id="MathJax-Span-6003"><span class="mi" id="MathJax-Span-6004" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-6005" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6006" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.791em; vertical-align: -0.239em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-174">w_{sim}</script> of dimension <span class="MathJax" id="MathJax-Element-175-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6007" style="width: 1.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.07em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.681em, 1000em, 2.717em, -0.473em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6008"><span class="mn" id="MathJax-Span-6009" style="font-family: STIXGeneral-Regular;">6</span><span class="mi" id="MathJax-Span-6010" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.027em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.9em; vertical-align: -0.078em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-175">6d</script>, becuase we have <span class="MathJax" id="MathJax-Element-169-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5939" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5940"><span class="msubsup" id="MathJax-Span-5941"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5942" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5943" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-169">c_i</script> and <span class="MathJax" id="MathJax-Element-170-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5944" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.756em, -0.482em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5945"><span class="msubsup" id="MathJax-Span-5946"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5947" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-5948" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.048em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-170">q_j</script> both of dimensions <span class="MathJax" id="MathJax-Element-176-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6011" style="width: 1.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.07em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.716em, -0.478em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6012"><span class="mn" id="MathJax-Span-6013" style="font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-6014" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.027em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.898em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-176">2d</script>, the concatenation of two hidden layer states for two LSTMs, and because <span class="MathJax" id="MathJax-Element-173-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5995" style="width: 0.453em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.394em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.978em, 1000em, 2.586em, -0.467em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-5996"><span class="mo" id="MathJax-Span-5997" style="font-family: STIXGeneral-Regular;">∘</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.425em; vertical-align: 0.067em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-173">\circ</script> is the elementwise product):</p>
<p>The Hadamard product is kind of 'cheating' for NN purists because you would hope that the product term between the passage and the question would be learned by the NN and you didn't have to give it to it, but in practice it helps a lot and is a 'hint' to the NN.</p>
<p>Use that similarity score to compute attention that goes in both directions:</p>
<h4>Context-to-Question (C2Q) Attention:</h4>
<p>(Which query words are most relevent to each context word)<br>
For each context word, take the similarity scores over a softmax to generate an attention distribution over question words, and compute the attention encoding of each context word as the attention-weighted sum of the embeddings of each question word.<br>
</p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-177-Frame" style=""><nobr><span class="math" id="MathJax-Span-6015" style="width: 20.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 18.3em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.474em, 1000em, 2.91em, -0.48em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6016"><span class="msubsup" id="MathJax-Span-6017"><span style="display: inline-block; position: relative; width: 1.37em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.48em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6018" style="font-family: STIXGeneral-Italic;">α</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.563em;"><span class="texatom" id="MathJax-Span-6019"><span class="mrow" id="MathJax-Span-6020"><span class="mo" id="MathJax-Span-6021" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-6022" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6023" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6024" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-6025" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">s</span><span class="mi" id="MathJax-Span-6026" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-6027" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mi" id="MathJax-Span-6028" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span><span class="mi" id="MathJax-Span-6029" style="font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-6030" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-6031" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-6032" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-6033"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6034" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6035"><span class="mrow" id="MathJax-Span-6036"><span class="mi" id="MathJax-Span-6037" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6038" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">:</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6039" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-6040" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="msubsup" id="MathJax-Span-6041" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.37em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6042" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.619em;"><span class="mi" id="MathJax-Span-6043" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.028em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mspace" id="MathJax-Span-6044" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6045" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6046" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6047" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-6048" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-6049" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6050" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mo" id="MathJax-Span-6051" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">{</span><span class="mn" id="MathJax-Span-6052" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-6053" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-6054" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6055" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6056" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6057" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="mi" id="MathJax-Span-6058" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-6059" style="font-family: STIXGeneral-Regular;">}</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.344em; vertical-align: -0.292em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-177">\alpha^{(i)} = softmax(S_{i:}) \in R^M \;\;\;\; \forall i \in \{1,...,N\}</script><br>
<div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-178-Frame" style=""><nobr><span class="math" id="MathJax-Span-6060" style="width: 18.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.498em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(0.603em, 1000em, 4.099em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6061"><span class="msubsup" id="MathJax-Span-6062"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6063" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-6064" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6065" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="munderover" id="MathJax-Span-6066" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.351em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 3.628em, -0.417em); top: -2.984em; left: 0em;"><span class="mo" id="MathJax-Span-6067" style="font-family: STIXSizeOneSym; vertical-align: -0.524em;">∑</span><span style="display: inline-block; width: 0px; height: 2.984em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.724em, -0.594em); top: -1.159em; left: 0.113em;"><span class="texatom" id="MathJax-Span-6068"><span class="mrow" id="MathJax-Span-6069"><span class="mi" id="MathJax-Span-6070" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span class="mo" id="MathJax-Span-6071" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-6072" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.578em, 1000em, 2.477em, -0.519em); top: -3.509em; left: 0.338em;"><span class="mi" id="MathJax-Span-6073" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.028em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6074" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.37em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.48em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6075" style="font-family: STIXGeneral-Italic;">α</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.603em, -0.473em); top: -2.778em; left: 0.563em;"><span class="texatom" id="MathJax-Span-6076"><span class="mrow" id="MathJax-Span-6077"><span class="mo" id="MathJax-Span-6078" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-6079" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6080" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.679em, 1000em, 2.624em, -0.594em); top: -2.012em; left: 0.563em;"><span class="mi" id="MathJax-Span-6081" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6082"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6083" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-6084" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6085" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="msubsup" id="MathJax-Span-6086" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.426em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6087" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.619em;"><span class="texatom" id="MathJax-Span-6088"><span class="mrow" id="MathJax-Span-6089"><span class="mn" id="MathJax-Span-6090" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-6091" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">h</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mspace" id="MathJax-Span-6092" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6093" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6094" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6095" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-6096" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-6097" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6098" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mo" id="MathJax-Span-6099" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">{</span><span class="mn" id="MathJax-Span-6100" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-6101" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-6102" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6103" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6104" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6105" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="mi" id="MathJax-Span-6106" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-6107" style="font-family: STIXGeneral-Regular;">}</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 3.631em; vertical-align: -1.612em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-178">a_i = \sum_{j=1}^M \alpha_j^{(i)} q_j \in R^{2h} \;\;\;\; \forall i \in \{1,...,N\}</script><p></p>
<h4>Question-to-Context (Q2C) Attention:</h4>
<p>(Weighted sum of the most important words in the context with respect to the query - slight asymmetry through max)</p>
<p>Slightly different from the C2Q direction.<br>
Again start out with the smae similarity scores <span class="MathJax" id="MathJax-Element-179-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6108" style="width: 1.266em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.126em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.36em, 1000em, 2.661em, -0.49em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6109"><span class="msubsup" id="MathJax-Span-6110"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6111" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6112"><span class="mrow" id="MathJax-Span-6113"><span class="mi" id="MathJax-Span-6114" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6115" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.194em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-179">S_{ij}</script>, but this time, find which position in the question aligns the most with the context, so this time they are finding a max (the position in the question most aligned to the context). For each of the context words they are finding the most aligned question word, and then computing the <span class="MathJax" id="MathJax-Element-180-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6116" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.687em, 1000em, 2.908em, -0.547em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6117"><span class="mi" id="MathJax-Span-6118" style="font-family: STIXGeneral-Italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.105em; vertical-align: -0.29em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-180">\beta</script> attention distribution as the softmax distribution over the scores of the most aligned question words.<br>
The <span class="MathJax" id="MathJax-Element-180-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6116" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.687em, 1000em, 2.908em, -0.547em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6117"><span class="mi" id="MathJax-Span-6118" style="font-family: STIXGeneral-Italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.105em; vertical-align: -0.29em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-180">\beta</script> distribution is used to form the new representation of the context passage by taking a weighted sum of the passage over <span class="MathJax" id="MathJax-Element-180-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6116" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.687em, 1000em, 2.908em, -0.547em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6117"><span class="mi" id="MathJax-Span-6118" style="font-family: STIXGeneral-Italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.105em; vertical-align: -0.29em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-180">\beta</script>.</p>
<p></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-181-Frame" style=""><nobr><span class="math" id="MathJax-Span-6119" style="width: 17.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.653em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(-1.477em, 1000em, 5.369em, -0.38em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6120"><span class="mtable" id="MathJax-Span-6121" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 15.315em; height: 0px;"><span style="position: absolute; clip: rect(2.598em, 1000em, 7.838em, -0.547em); top: -5.912em; left: 0em;"><span style="display: inline-block; position: relative; width: 2.083em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.86em, -0.495em); top: -5.238em; right: 0em;"><span class="mtd" id="MathJax-Span-6122"><span class="mrow" id="MathJax-Span-6123"><span class="msubsup" id="MathJax-Span-6124"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6125" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-6126" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6127" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.687em, 1000em, 2.908em, -0.547em); top: -3.094em; right: 0em;"><span class="mtd" id="MathJax-Span-6157"><span class="mrow" id="MathJax-Span-6158"><span class="mi" id="MathJax-Span-6159" style="font-family: STIXGeneral-Italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span class="mo" id="MathJax-Span-6160" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.552em, 1000em, 2.714em, -0.477em); top: -0.788em; right: 0em;"><span class="mtd" id="MathJax-Span-6177"><span class="mrow" id="MathJax-Span-6178"><span class="msup" id="MathJax-Span-6179"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6180" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.45em;"><span class="mo" id="MathJax-Span-6181" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6182" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.912em;"></span></span><span style="position: absolute; clip: rect(3.823em, 1000em, 10.549em, -0.491em); top: -7.376em; left: 2.083em;"><span style="display: inline-block; position: relative; width: 13.232em; height: 0px;"><span style="position: absolute; clip: rect(1.685em, 1000em, 3.634em, -0.241em); top: -5.238em; left: 0em;"><span class="mtd" id="MathJax-Span-6128"><span class="mrow" id="MathJax-Span-6129"><span class="munderover" id="MathJax-Span-6130" style="padding-left: 0.25em; padding-right: 0.375em;"><span style="display: inline-block; position: relative; width: 1.745em; height: 0px;"><span style="position: absolute; clip: rect(1.905em, 1000em, 2.713em, -0.491em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-6131" style="font-family: STIXGeneral-Regular;">max</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.679em, 1000em, 2.724em, -0.594em); top: -1.624em; left: 0.76em;"><span class="mi" id="MathJax-Span-6132" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6133"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6134" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6135"><span class="mrow" id="MathJax-Span-6136"><span class="mi" id="MathJax-Span-6137" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6138" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6139" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mi" id="MathJax-Span-6140" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">R</span><span class="mspace" id="MathJax-Span-6141" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6142" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6143" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6144" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-6145" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-6146" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6147" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mo" id="MathJax-Span-6148" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">{</span><span class="mn" id="MathJax-Span-6149" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-6150" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-6151" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6152" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6153" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6154" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="mi" id="MathJax-Span-6155" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-6156" style="font-family: STIXGeneral-Regular;">}</span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.49em, 1000em, 2.91em, -0.491em); top: -3.094em; left: 0em;"><span class="mtd" id="MathJax-Span-6161"><span class="mrow" id="MathJax-Span-6162"><span class="mi" id="MathJax-Span-6163" style="font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-6164" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-6165" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mi" id="MathJax-Span-6166" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span><span class="mi" id="MathJax-Span-6167" style="font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-6168" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-6169" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-6170" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-6171" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-6172" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-6173" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="msubsup" id="MathJax-Span-6174" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6175" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.619em;"><span class="mi" id="MathJax-Span-6176" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(0.603em, 1000em, 3.96em, -0.167em); top: -0.788em; left: 0em;"><span class="mtd" id="MathJax-Span-6183"><span class="mrow" id="MathJax-Span-6184"><span class="munderover" id="MathJax-Span-6185" style="padding-left: 0.25em; padding-right: 0.188em;"><span style="display: inline-block; position: relative; width: 1.351em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 3.628em, -0.417em); top: -2.984em; left: 0em;"><span class="mo" id="MathJax-Span-6186" style="font-family: STIXSizeOneSym; vertical-align: -0.524em;">∑</span><span style="display: inline-block; width: 0px; height: 2.984em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.585em, -0.472em); top: -1.159em; left: 0.113em;"><span class="texatom" id="MathJax-Span-6187"><span class="mrow" id="MathJax-Span-6188"><span class="mi" id="MathJax-Span-6189" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6190" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-6191" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.578em, 1000em, 2.488em, -0.521em); top: -3.509em; left: 0.394em;"><span class="mi" id="MathJax-Span-6192" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.042em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6193"><span style="display: inline-block; position: relative; width: 0.855em; height: 0px;"><span style="position: absolute; clip: rect(1.687em, 1000em, 2.908em, -0.547em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6194" style="font-family: STIXGeneral-Italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.555em;"><span class="mi" id="MathJax-Span-6195" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6196"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6197" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-6198" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6199" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="msubsup" id="MathJax-Span-6200" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.426em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6201" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.619em;"><span class="texatom" id="MathJax-Span-6202"><span class="mrow" id="MathJax-Span-6203"><span class="mn" id="MathJax-Span-6204" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-6205" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">h</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.376em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 7.348em; vertical-align: -3.397em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-181">\begin{align} m_i = & \max_j S_{ij} \in R \;\;\;\; \forall i \in \{1,..., N\} \\ \beta = & softmax(m) \in R^N \\ c' = & \sum_{i=1}^N \beta_i c_i \in R^{2h} \end{align}</script><p></p>
<h4>Putting it All Together: Full Attention-Flow</h4>
<p>For each context position, the ourput of the BiDAF layer is<br>
</p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-182-Frame" style=""><nobr><span class="math" id="MathJax-Span-6206" style="width: 23.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 21.284em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.469em, 1000em, 2.884em, -0.484em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6207"><span class="msubsup" id="MathJax-Span-6208"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.484em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6209" style="font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-6210" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6211" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mo" id="MathJax-Span-6212" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">[</span><span class="msubsup" id="MathJax-Span-6213"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6214" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-6215" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6216" style="font-family: STIXGeneral-Regular;">;</span><span class="msubsup" id="MathJax-Span-6217" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6218" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-6219" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6220" style="font-family: STIXGeneral-Regular;">;</span><span class="msubsup" id="MathJax-Span-6221" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6222" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-6223" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6224" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">∘</span><span class="msubsup" id="MathJax-Span-6225" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6226" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-6227" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6228" style="font-family: STIXGeneral-Regular;">;</span><span class="msubsup" id="MathJax-Span-6229" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6230" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-6231" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6232" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">∘</span><span class="msup" id="MathJax-Span-6233" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6234" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.45em;"><span class="mo" id="MathJax-Span-6235" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6236" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-6237" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="msubsup" id="MathJax-Span-6238" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.426em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6239" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.721em; left: 0.619em;"><span class="texatom" id="MathJax-Span-6240"><span class="mrow" id="MathJax-Span-6241"><span class="mn" id="MathJax-Span-6242" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">8</span><span class="mi" id="MathJax-Span-6243" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">h</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mspace" id="MathJax-Span-6244" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6245" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6246" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-6247" style="height: 0em; vertical-align: 0em; width: 0.313em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-6248" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-6249" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-6250" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mo" id="MathJax-Span-6251" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">{</span><span class="mn" id="MathJax-Span-6252" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-6253" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-6254" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6255" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6256" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-6257" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="mi" id="MathJax-Span-6258" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-6259" style="font-family: STIXGeneral-Regular;">}</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.32em; vertical-align: -0.263em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-182">b_i = [c_i;a_i;c_i \circ a_i; c_i \circ c'] \in R^{8h} \;\;\;\; \forall i \in \{1,...,N\}</script><br>
where <span class="MathJax" id="MathJax-Element-169-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5939" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5940"><span class="msubsup" id="MathJax-Span-5941"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5942" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5943" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-169">c_i</script> is the original embedding of the context word from the bi_LSTM, <span class="MathJax" id="MathJax-Element-183-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6260" style="width: 1.016em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.49em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6261"><span class="msubsup" id="MathJax-Span-6262"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6263" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-6264" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-183">a_i</script> is the new embedding of the context word from the C2Q attention using which query words are most relevent to that context word, and <span class="MathJax" id="MathJax-Element-184-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6265" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.265em, 1000em, 2.376em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6266"><span class="msup" id="MathJax-Span-6267"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6268" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="mo" id="MathJax-Span-6269" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.983em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-184">c'</script> is the weigted sum of the most important words in the context with respect to the query).<p></p>
<p>In the new parameterization, <span class="MathJax" id="MathJax-Element-169-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5939" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5940"><span class="msubsup" id="MathJax-Span-5941"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5942" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5943" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-169">c_i</script> is the embedding of the context, <span class="MathJax" id="MathJax-Element-183-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6260" style="width: 1.016em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.49em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6261"><span class="msubsup" id="MathJax-Span-6262"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6263" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-6264" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-183">a_i</script> is the embedding of the context taking into account the query, <span class="MathJax" id="MathJax-Element-185-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6270" style="width: 2.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.477em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.86em, -0.477em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6271"><span class="msubsup" id="MathJax-Span-6272"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6273" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-6274" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6275" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">∘</span><span class="msubsup" id="MathJax-Span-6276" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 0.863em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6277" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.563em;"><span class="mi" id="MathJax-Span-6278" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-185">c_i \circ a_i</script> is a 'hint' to look at interaction terms, and <span class="MathJax" id="MathJax-Element-186-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6279" style="width: 2.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.421em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.602em, 1000em, 2.86em, -0.477em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6280"><span class="msubsup" id="MathJax-Span-6281"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6282" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-6283" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6284" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">∘</span><span class="msup" id="MathJax-Span-6285" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6286" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="mo" id="MathJax-Span-6287" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.146em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-186">c_i \circ c'</script> is an 'amplification' of the most important terms in the context. <span class="MathJax" id="MathJax-Element-184-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6265" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.265em, 1000em, 2.376em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6266"><span class="msup" id="MathJax-Span-6267"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6268" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="mo" id="MathJax-Span-6269" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.983em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-184">c'</script> does not appear by itself because all of its information is already captured in <span class="MathJax" id="MathJax-Element-169-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-5939" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-5940"><span class="msubsup" id="MathJax-Span-5941"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-5942" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-5943" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-169">c_i</script>.</p>
<h3>Final BiDAF Layers</h3>
<p>After the attention flow layer, there is another deep (2-layer) bi-LSTM over the context using the attention flow output as the word embeddings (this is called the 'modelling layer'.</p>
<p>Finally, answer span selection is more complex:</p>
<ul>
<li>Start: Pass ourput of BiDAF and modelling layer concatenated together to a dense FF layer and then a softmax.</li>
<li>End: Put output of modelling layer M through another bi-LSTM to give M2 (kind of a hack to make it deeper) and then concatenate with BiDAF layer and again put through dense FF layer and a softmax.</li>
</ul>
<h2>FusionNet</h2>
<p>Recall Simplified Variants of Multiplictive Attention.</p>
<ul>
<li><span class="MathJax" id="MathJax-Element-187-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6288" style="width: 5.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.124em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.559em, 1000em, 3.093em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6289"><span class="msubsup" id="MathJax-Span-6290"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6291" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6292"><span class="mrow" id="MathJax-Span-6293"><span class="mi" id="MathJax-Span-6294" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6295" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6296" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="msubsup" id="MathJax-Span-6297" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6298" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.465em); top: -2.653em; left: 0.45em;"><span class="mi" id="MathJax-Span-6299" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.45em;"><span class="mi" id="MathJax-Span-6300" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-6301" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span><span class="msubsup" id="MathJax-Span-6302"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6303" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-6304" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.454em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-187">S_{ij} = c_i^T W q_j</script> is the original multiplicative attention.</li>
<li><span class="MathJax" id="MathJax-Element-188-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6305" style="width: 7.016em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.306em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.523em, 1000em, 3.093em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6306"><span class="msubsup" id="MathJax-Span-6307"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6308" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6309"><span class="mrow" id="MathJax-Span-6310"><span class="mi" id="MathJax-Span-6311" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6312" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6313" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="msubsup" id="MathJax-Span-6314" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6315" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.465em); top: -2.653em; left: 0.45em;"><span class="mi" id="MathJax-Span-6316" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.45em;"><span class="mi" id="MathJax-Span-6317" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6318"><span style="display: inline-block; position: relative; width: 1.377em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.721em, -0.405em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6319" style="font-family: STIXGeneral-Italic;">U<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.043em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.689em; left: 0.851em;"><span class="mi" id="MathJax-Span-6320" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-6321" style="font-family: STIXGeneral-Italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.077em;"></span></span><span class="msubsup" id="MathJax-Span-6322"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6323" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-6324" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.493em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-188">S_{ij} = c_i^T U^T V q_j</script> where <span class="MathJax" id="MathJax-Element-189-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6325" style="width: 2.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.914em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.844em, -0.405em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6326"><span class="mi" id="MathJax-Span-6327" style="font-family: STIXGeneral-Italic;">U<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.043em;"></span></span><span class="mo" id="MathJax-Span-6328" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-6329" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.077em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.006em; vertical-align: -0.219em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-189">U, V</script> are low rank</li>
<li><span class="MathJax" id="MathJax-Element-190-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6330" style="width: 8.266em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.432em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.523em, 1000em, 3.093em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6331"><span class="msubsup" id="MathJax-Span-6332"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6333" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6334"><span class="mrow" id="MathJax-Span-6335"><span class="mi" id="MathJax-Span-6336" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6337" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6338" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="msubsup" id="MathJax-Span-6339" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6340" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.465em); top: -2.653em; left: 0.45em;"><span class="mi" id="MathJax-Span-6341" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.45em;"><span class="mi" id="MathJax-Span-6342" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6343"><span style="display: inline-block; position: relative; width: 1.555em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.721em, -0.436em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6344" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.689em; left: 1.029em;"><span class="mi" id="MathJax-Span-6345" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-6346" style="font-family: STIXGeneral-Italic;">D</span><span class="mi" id="MathJax-Span-6347" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span><span class="msubsup" id="MathJax-Span-6348"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6349" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-6350" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.493em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-190">S_{ij} = c_i^T W^T D W q_j</script> where <span class="MathJax" id="MathJax-Element-191-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6351" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.957em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.721em, -0.436em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6352"><span class="mi" id="MathJax-Span-6353" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.87em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-191">W</script> is low rank and <span class="MathJax" id="MathJax-Element-192-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6354" style="width: 0.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.515em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6355"><span class="mi" id="MathJax-Span-6356" style="font-family: STIXGeneral-Italic;">D</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-192">D</script> is diag</li>
<li><span class="MathJax" id="MathJax-Element-193-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6357" style="width: 13.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.5em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.523em, 1000em, 3.093em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6358"><span class="msubsup" id="MathJax-Span-6359"><span style="display: inline-block; position: relative; width: 1.081em; height: 0px;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6360" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.555em;"><span class="texatom" id="MathJax-Span-6361"><span class="mrow" id="MathJax-Span-6362"><span class="mi" id="MathJax-Span-6363" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-6364" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6365" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-6366" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">R</span><span class="mi" id="MathJax-Span-6367" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-6368" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span class="mi" id="MathJax-Span-6369" style="font-family: STIXGeneral-Italic;">u</span><span class="mo" id="MathJax-Span-6370" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-6371"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6372" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.465em); top: -2.653em; left: 0.45em;"><span class="mi" id="MathJax-Span-6373" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.45em;"><span class="mi" id="MathJax-Span-6374" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-6375"><span style="display: inline-block; position: relative; width: 1.555em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.721em, -0.436em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6376" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.689em; left: 1.029em;"><span class="mi" id="MathJax-Span-6377" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6378" style="font-family: STIXGeneral-Regular;">)</span><span class="mi" id="MathJax-Span-6379" style="font-family: STIXGeneral-Italic;">D</span><span class="mi" id="MathJax-Span-6380" style="font-family: STIXGeneral-Italic;">R</span><span class="mi" id="MathJax-Span-6381" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-6382" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span class="mi" id="MathJax-Span-6383" style="font-family: STIXGeneral-Italic;">u</span><span class="mo" id="MathJax-Span-6384" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-6385" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.073em;"></span></span><span class="msubsup" id="MathJax-Span-6386"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.912em, -0.482em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6387" style="font-family: STIXGeneral-Italic;">q</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.064em; left: 0.507em;"><span class="mi" id="MathJax-Span-6388" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6389" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.493em; vertical-align: -0.496em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-193">S_{ij} = Relu(c_i^T W^T) D Relu(W q_j)</script> FusionNet Attention because of a heuristic 'non-linearities are very important in deep learning'.</li>
</ul>
<p>Because building attention in the last way is much much cheaper (Space complexity is <span class="MathJax" id="MathJax-Element-194-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6390" style="width: 7.016em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.306em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.88em, -0.447em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-6391"><span class="mi" id="MathJax-Span-6392" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-6393" style="font-family: STIXGeneral-Regular;">(</span><span class="mo" id="MathJax-Span-6394" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-6395"><span style="display: inline-block; position: relative; width: 1.005em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.716em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6396" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.027em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.536em;"><span class="mn" id="MathJax-Span-6397" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6398" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="msubsup" id="MathJax-Span-6399" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.005em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.716em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6400" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.027em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.536em;"><span class="mn" id="MathJax-Span-6401" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6402" style="font-family: STIXGeneral-Regular;">)</span><span class="msubsup" id="MathJax-Span-6403"><span style="display: inline-block; position: relative; width: 1.005em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.716em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6404" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.027em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.536em;"><span class="mn" id="MathJax-Span-6405" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">3</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-6406" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.08em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-194">O((d_1+d_2)d_3)</script> where <span class="MathJax" id="MathJax-Element-195-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-6407" style="width: 1.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.014em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.344em, 1000em, 2.525em, -0.492em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-6408"><span class="msubsup" id="MathJax-Span-6409"><span style="display: inline-block; position: relative; width: 1.005em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.716em, -0.492em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-6410" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.027em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.536em;"><span class="mn" id="MathJax-Span-6411" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">3</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.061em; vertical-align: -0.24em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-195">d_3</script> is the dimensionality of the reduced dimension diagonal) they can use lots and lots of attention and they combined a lot of forms of attention to come up with the fusion network.</p>
</div><div class="cell text-cell"><div><div><img src="resources/A9E4907A0FE04237D4935F41B6C6B080.png" alt="Screenshot 2020-01-23 at 11.22.47 PM.png" width="576" height="449"><br></div></div><div><img src="resources/9C826DECE181F97079804B87DCB75DEA.png" alt="Screenshot 2020-01-23 at 11.23.00 PM.png" width="574" height="433"><b><br></b></div><div><b><br></b></div><div>The FusionNet people made a point that a lot of the different models people have done in the last couple of years have been using and putting together different forms of attention. They try all of them. There is a catalog of different for all the ways attention has been used.</div>


    </body>
    </html>
  