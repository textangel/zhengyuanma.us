
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="titlearea">
        <h2>Lecture 16 - Data Streams 2</h2>
      </div>
      <div id="contentarea"><div class="cell markdown-cell"><h1>Bloom Filters (Hash Filters)- Filtering a Data Stream</h1>
<h2>Applications:</h2>
<ul>
<li>We know 1 billion 'whitelisted email addresses' for each user. If an email comes form one of these, it is NOT spam.</li>
<li>Publish-subscribs system - You are collecing a lot of mesages (news articles). People express interst in certain sets of keywords. Determine whether each message matches the user's interest</li>
<li>Content Filtering - You want ot make sure the user does not ee the same content twice.</li>
</ul>
<h2>Setting</h2>
<ul>
<li>Every element of a data stream is a tuple. Given a list of keys S, determine which tuples of the stream are in S.</li>
<li>Obvious solution: Hash table lookup. But suppose we do not have enough memory to store all of S in a has table</li>
</ul>
<h2>Bloom Filter - Use multiple hash functions!</h2>
<ul>
<li>See (1) for first cut solution.</li>
<li>Consider a set of keys <span class="MathJax" id="MathJax-Element-684-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8734" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8735"><span class="mi" id="MathJax-Span-8736" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.885em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-684">S</script> that we want to filter such that <span class="MathJax" id="MathJax-Element-685-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8737" style="width: 3.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.984em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.721em, -0.44em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8738"><span class="texatom" id="MathJax-Span-8739"><span class="mrow" id="MathJax-Span-8740"><span class="mo" id="MathJax-Span-8741" style="font-family: STIXGeneral-Regular;">|</span></span></span><span class="mi" id="MathJax-Span-8742" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span class="texatom" id="MathJax-Span-8743"><span class="mrow" id="MathJax-Span-8744"><span class="mo" id="MathJax-Span-8745" style="font-family: STIXGeneral-Regular;">|</span></span></span><span class="mo" id="MathJax-Span-8746" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-8747" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">m</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-685">|S| = m</script>, and a single bit array <span class="MathJax" id="MathJax-Element-686-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8748" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.619em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.515em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8749"><span class="mi" id="MathJax-Span-8750" style="font-family: STIXGeneral-Italic;">B</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-686">B</script> of length <span class="MathJax" id="MathJax-Element-687-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8751" style="width: 3.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.872em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.717em, -0.44em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8752"><span class="texatom" id="MathJax-Span-8753"><span class="mrow" id="MathJax-Span-8754"><span class="mo" id="MathJax-Span-8755" style="font-family: STIXGeneral-Regular;">|</span></span></span><span class="mi" id="MathJax-Span-8756" style="font-family: STIXGeneral-Italic;">B</span><span class="texatom" id="MathJax-Span-8757"><span class="mrow" id="MathJax-Span-8758"><span class="mo" id="MathJax-Span-8759" style="font-family: STIXGeneral-Regular;">|</span></span></span><span class="mo" id="MathJax-Span-8760" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-8761" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.891em; vertical-align: -0.078em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-687">|B| = n</script>. Use <span class="MathJax" id="MathJax-Element-688-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8762" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8763"><span class="mi" id="MathJax-Span-8764" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-688">k</script> independent hash functions <span class="MathJax" id="MathJax-Element-689-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8765" style="width: 4.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.11em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.86em, -0.488em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8766"><span class="msubsup" id="MathJax-Span-8767"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8768" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mn" id="MathJax-Span-8769" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8770" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-8771" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8772" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8773" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8774" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="msubsup" id="MathJax-Span-8775" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8776" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8777" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.058em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-689">h_1,...,h_k</script>.</li>
<li>Initialization:
<ul>
<li>Set <span class="MathJax" id="MathJax-Element-686-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8748" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.619em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.515em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8749"><span class="mi" id="MathJax-Span-8750" style="font-family: STIXGeneral-Italic;">B</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-686">B</script> to all <span class="MathJax" id="MathJax-Element-690-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8778" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.717em, -0.483em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8779"><span class="mn" id="MathJax-Span-8780" style="font-family: STIXGeneral-Regular;">0</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.891em; vertical-align: -0.078em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-690">0</script>s</li>
<li>Hash each element <span class="MathJax" id="MathJax-Element-691-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8781" style="width: 2.516em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.252em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.73em, -0.491em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8782"><span class="mi" id="MathJax-Span-8783" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-8784" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mi" id="MathJax-Span-8785" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.092em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-691">s \in S</script> using each hash function <span class="MathJax" id="MathJax-Element-692-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8786" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.344em, 1000em, 2.523em, -0.488em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8787"><span class="msubsup" id="MathJax-Span-8788"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8789" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8790" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.058em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-692">h_i</script>, set <span class="MathJax" id="MathJax-Element-693-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8791" style="width: 5.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.011em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.88em, -0.515em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8792"><span class="mi" id="MathJax-Span-8793" style="font-family: STIXGeneral-Italic;">B</span><span class="mo" id="MathJax-Span-8794" style="font-family: STIXGeneral-Regular;">[</span><span class="msubsup" id="MathJax-Span-8795"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8796" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8797" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8798" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-8799" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-8800" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-8801" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-8802" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-8803" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.08em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-693">B[h_i(s)]=1</script> (for each <span class="MathJax" id="MathJax-Element-694-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8804" style="width: 4.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.392em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.844em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8805"><span class="mi" id="MathJax-Span-8806" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-8807" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-8808" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span><span class="mo" id="MathJax-Span-8809" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-8810" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8811" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8812" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="mi" id="MathJax-Span-8813" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.04em; vertical-align: -0.219em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-694">i=1,..,k</script>)</li>
</ul>
</li>
<li>At run-time, when a stream element with key <span class="MathJax" id="MathJax-Element-695-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8814" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.534em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8815"><span class="mi" id="MathJax-Span-8816" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-695">x</script> arrives, if <span class="MathJax" id="MathJax-Element-696-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8817" style="width: 5.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.068em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.999em, -0.515em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8818"><span class="mi" id="MathJax-Span-8819" style="font-family: STIXGeneral-Italic;">B</span><span class="mo" id="MathJax-Span-8820" style="font-family: STIXGeneral-Regular;">[</span><span class="msubsup" id="MathJax-Span-8821"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8822" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8823" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8824" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-8825" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-8826" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-8827" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-8828" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-8829" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.212em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-696">B[h_j(x)] = 1</script> for all <span class="MathJax" id="MathJax-Element-697-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8830" style="width: 5.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.786em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.844em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8831"><span class="mi" id="MathJax-Span-8832" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-8833" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-8834" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span><span class="mo" id="MathJax-Span-8835" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-8836" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8837" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8838" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-8839" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="mi" id="MathJax-Span-8840" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.04em; vertical-align: -0.219em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-697">i=1,...,k</script>, then declare that <span class="MathJax" id="MathJax-Element-695-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8814" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.534em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8815"><span class="mi" id="MathJax-Span-8816" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-695">x</script> in S. Otherwise, discard <span class="MathJax" id="MathJax-Element-695-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8814" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.534em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8815"><span class="mi" id="MathJax-Span-8816" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-695">x</script>.</li>
<li><strong>Analysis</strong>
<ul>
<li>Throwing <span class="MathJax" id="MathJax-Element-698-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8841" style="width: 1.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.239em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8842"><span class="mi" id="MathJax-Span-8843" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span><span class="mi" id="MathJax-Span-8844" style="font-family: STIXGeneral-Italic;">m</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-698">km</script> darts at <span class="MathJax" id="MathJax-Element-699-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8845" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8846"><span class="mi" id="MathJax-Span-8847" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.625em; vertical-align: -0.072em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-699">n</script> targets.</li>
<li>So fraction of 1s is <span class="MathJax" id="MathJax-Element-700-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8848" style="width: 4.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.223em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.519em, 1000em, 2.714em, -0.396em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8849"><span class="mn" id="MathJax-Span-8850" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-8851" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-8852" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 2.496em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.476em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8853" style="font-family: STIXGeneral-Italic;">e</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="texatom" id="MathJax-Span-8854"><span class="mrow" id="MathJax-Span-8855"><span class="mo" id="MathJax-Span-8856" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-8857" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span class="mi" id="MathJax-Span-8858" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="texatom" id="MathJax-Span-8859"><span class="mrow" id="MathJax-Span-8860"><span class="mo" id="MathJax-Span-8861" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-8862" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.076em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-700">1-e^{-km/n}</script>.</li>
<li>But we have <span class="MathJax" id="MathJax-Element-688-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8762" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8763"><span class="mi" id="MathJax-Span-8764" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-688">k</script> independent hash functions and we only let the element <span class="MathJax" id="MathJax-Element-695-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8814" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.534em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8815"><span class="mi" id="MathJax-Span-8816" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-695">x</script> through if all <span class="MathJax" id="MathJax-Element-688-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8762" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8763"><span class="mi" id="MathJax-Span-8764" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-688">k</script> hash element <span class="MathJax" id="MathJax-Element-695-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8814" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.534em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8815"><span class="mi" id="MathJax-Span-8816" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-695">x</script> to a bucket of value 1. So false positive probability is <span class="MathJax" id="MathJax-Element-701-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8863" style="width: 5.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.293em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.479em, 1000em, 2.88em, -0.459em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8864"><span class="mo" id="MathJax-Span-8865" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-8866" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-8867" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-8868" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 2.496em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.476em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8869" style="font-family: STIXGeneral-Italic;">e</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="texatom" id="MathJax-Span-8870"><span class="mrow" id="MathJax-Span-8871"><span class="mo" id="MathJax-Span-8872" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-8873" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span class="mi" id="MathJax-Span-8874" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="texatom" id="MathJax-Span-8875"><span class="mrow" id="MathJax-Span-8876"><span class="mo" id="MathJax-Span-8877" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-8878" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-8879"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-8880" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="mi" id="MathJax-Span-8881" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.305em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-701">(1-e^{-km/n})^k</script></li>
<li>There is an o<strong>ptimal number of hash functions</strong> <span class="MathJax" id="MathJax-Element-702-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8882" style="width: 6.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.081em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.88em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8883"><span class="mi" id="MathJax-Span-8884" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span><span class="mo" id="MathJax-Span-8885" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-8886" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">n</span><span class="texatom" id="MathJax-Span-8887"><span class="mrow" id="MathJax-Span-8888"><span class="mo" id="MathJax-Span-8889" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-8890" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-8891" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋅</span><span class="mi" id="MathJax-Span-8892" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">ln</span><span class="mo" id="MathJax-Span-8893"></span><span class="mo" id="MathJax-Span-8894" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-8895" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-8896" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.08em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-702">k = n/m \cdot \ln(2)</script> which gives you the minimum error. Less than that and you are not using enouch hash functions, more than that and you are polluting hte bit vector with 1s. (2)</li>
</ul>
</li>
<li>Bloom filters have the same result whether you use one big B array or k small B arrays.</li>
</ul>
<h1>Flajolet-Martin Algo - Counting Distinct Elements in a Stream</h1>
<p>Problem: Data Stream contains items from a universe of elements chosed from a size of size N. Maintian a count of the number of distinct elemnts seen so far.<br>
Obvious Approach: Maintain the set of elements seen so far in a hash table. But suppose we do not have enough memory to store all the elements seen so far. Real problem: What if we do not have space to maintain the set of elements seen so far? We wish to estimate the count in an unbiased way. Acept the count may have a little error but limit the prob the error is large.</p>
<h2>Applications</h2>
<ul>
<li>How many different words are found among the Web pages being crawled at a site?</li>
<li>How many different Web pages does each customer request in a week?</li>
<li>How many distinct products have we sold in the last week.</li>
</ul>
<h2>Flajolet-Martin Algo - Counting Distinct Elements in a Stream</h2>
<ul>
<li>See (4) for motivation and first cut solution.</li>
<li>Use many has functions <span class="MathJax" id="MathJax-Element-692-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8786" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.344em, 1000em, 2.523em, -0.488em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8787"><span class="msubsup" id="MathJax-Span-8788"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8789" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8790" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.058em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-692">h_i</script> that maps each of <span class="MathJax" id="MathJax-Element-703-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8897" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.718em, -0.527em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8898"><span class="mi" id="MathJax-Span-8899" style="font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.866em; vertical-align: -0.079em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-703">N</script> elements to at least <span class="MathJax" id="MathJax-Element-704-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8900" style="width: 3.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.759em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.956em, -0.488em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8901"><span class="msubsup" id="MathJax-Span-8902"><span style="display: inline-block; position: relative; width: 1.82em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.921em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8903" style="font-family: STIXGeneral-Regular;">log</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.055em; left: 1.351em;"><span class="mn" id="MathJax-Span-8904" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8905"></span><span class="mi" id="MathJax-Span-8906" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.164em; vertical-align: -0.344em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-704">\log_2 N</script> bits.</li>
<li>For each hash function <span class="MathJax" id="MathJax-Element-692-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8786" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.344em, 1000em, 2.523em, -0.488em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8787"><span class="msubsup" id="MathJax-Span-8788"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8789" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8790" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.058em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-692">h_i</script>, for each stream element <span class="MathJax" id="MathJax-Element-705-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8907" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8908"><span class="mi" id="MathJax-Span-8909" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-705">a</script>, compute the number of trailing 0s in its hash and store it; at the end of the process obtain <span class="MathJax" id="MathJax-Element-706-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8910" style="width: 0.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.462em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8911"><span class="msubsup" id="MathJax-Span-8912"><span style="display: inline-block; position: relative; width: 0.728em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.703em, -0.462em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8913" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.427em;"><span class="mi" id="MathJax-Span-8914" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-706">r_i</script> which is the maximum number of trailing 0s seen so far for that hash function, and compute <span class="MathJax" id="MathJax-Element-707-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8915" style="width: 3.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.378em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.65em, 1000em, 2.86em, -0.52em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8916"><span class="msubsup" id="MathJax-Span-8917"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8918" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.619em;"><span class="mi" id="MathJax-Span-8919" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8920" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="msubsup" id="MathJax-Span-8921" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.125em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-8922" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -4.401em; left: 0.507em;"><span class="texatom" id="MathJax-Span-8923"><span class="mrow" id="MathJax-Span-8924"><span class="msubsup" id="MathJax-Span-8925"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px;"><span style="position: absolute; clip: rect(1.828em, 1000em, 2.477em, -0.475em); top: -2.309em; left: 0em;"><span class="mi" id="MathJax-Span-8926" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; top: -2.09em; left: 0.322em;"><span class="mi" id="MathJax-Span-8927" style="font-size: 50%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.094em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-707">R_i=2^{r_i}</script></li>
<li>Partition your samples of <span class="MathJax" id="MathJax-Element-708-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8928" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.957em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.374em, 1000em, 2.523em, -0.52em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8929"><span class="msubsup" id="MathJax-Span-8930"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8931" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.619em;"><span class="mi" id="MathJax-Span-8932" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.025em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-708">R_i</script> into small groups. Take the median of the groups, and then take the average of the medians.</li>
</ul>
<h1>AMS Method - Estimating Moments in a Stream</h1>
<p>Suppose a stream has elements chosen from a set <span class="MathJax" id="MathJax-Element-709-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8933" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.619em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.697em, 1000em, 2.703em, -0.558em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8934"><span class="mi" id="MathJax-Span-8935" style="font-family: STIXGeneral-Italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.866em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-709">A</script> of <span class="MathJax" id="MathJax-Element-703-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8897" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.718em, -0.527em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8898"><span class="mi" id="MathJax-Span-8899" style="font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.866em; vertical-align: -0.079em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-703">N</script> values. Let <span class="MathJax" id="MathJax-Element-710-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8936" style="width: 1.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.07em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.495em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8937"><span class="msubsup" id="MathJax-Span-8938"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8939" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-8940" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-710">m_i</script> be the number of times value <span class="MathJax" id="MathJax-Element-711-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8941" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.711em, 1000em, 2.714em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8942"><span class="mi" id="MathJax-Span-8943" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.863em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-711">i</script> occurs in the stream. The <span class="MathJax" id="MathJax-Element-688-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8762" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8763"><span class="mi" id="MathJax-Span-8764" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-688">k</script>th moment is <span class="MathJax" id="MathJax-Element-712-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8944" style="width: 4.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.336em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.479em, 1000em, 3.018em, -0.449em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8945"><span class="munderover" id="MathJax-Span-8946"><span style="display: inline-block; position: relative; width: 2.215em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-8947" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="texatom" id="MathJax-Span-8948"><span class="mrow" id="MathJax-Span-8949"><span class="mi" id="MathJax-Span-8950" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-8951" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∈</span><span class="mi" id="MathJax-Span-8952" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8953" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-8954"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8955" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-8956" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-8957"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-8958" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="mi" id="MathJax-Span-8959" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.459em; vertical-align: -0.413em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-712">\sum_{i \in A} (m_i) ^k</script>.</p>
<h2>Special Cases</h2>
<ul>
<li>Oth moment- number of distinct elemnts - use Flajolet-Martin</li>
<li>1st moment - count the number of elements (length of the stream)</li>
<li>2nd moment - surprise number <span class="MathJax" id="MathJax-Element-684-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8734" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.698em, 1000em, 2.721em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8735"><span class="mi" id="MathJax-Span-8736" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.885em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-684">S</script> - a measure of how uneven the distribution is.</li>
<li>3rd moment - Skew, 4th moment - kurtosis (peakedness and tail weight)</li>
</ul>
<h2>Example:</h2>
<ul>
<li>Suppose we have a stream of length 100, 11 distinct values.</li>
<li>If the item <strong>counts</strong> are: 10,9,9,9,9,9,9,9,9,9,9, the distribution is very even, the second moment (surprise) S=910.</li>
<li>If the item <strong>counts</strong> are: 90,1,1,1,1,1,1,1,1,1,1, the distribution is very uneven,the second moment (surprise) S=8110.</li>
</ul>
<h2>AMS method for the second moment:</h2>
<ul>
<li>Gives an unbiased estimate of a give moment (can also work for 3rd and 4th moemnt).</li>
<li>We pick and keep track of a limited many values <span class="MathJax" id="MathJax-Element-713-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8960" style="width: 0.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.676em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8961"><span class="mi" id="MathJax-Span-8962" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-713">X</script>. For each variable <span class="MathJax" id="MathJax-Element-713-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8960" style="width: 0.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.676em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8961"><span class="mi" id="MathJax-Span-8962" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-713">X</script> we store <span class="MathJax" id="MathJax-Element-714-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8963" style="width: 2.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.858em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8964"><span class="mi" id="MathJax-Span-8965" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8966" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8967" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">e</span><span class="mi" id="MathJax-Span-8968" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-714">X.el</script> and <span class="MathJax" id="MathJax-Element-715-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8969" style="width: 2.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.365em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.721em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8970"><span class="mi" id="MathJax-Span-8971" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8972" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8973" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">v</span><span class="mi" id="MathJax-Span-8974" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-8975" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.903em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-715">X.val</script>
<ul>
<li><span class="MathJax" id="MathJax-Element-714-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8963" style="width: 2.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.858em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8964"><span class="mi" id="MathJax-Span-8965" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8966" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8967" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">e</span><span class="mi" id="MathJax-Span-8968" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-714">X.el</script> corresponds to the item <span class="MathJax" id="MathJax-Element-711-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8941" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.711em, 1000em, 2.714em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8942"><span class="mi" id="MathJax-Span-8943" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.863em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-711">i</script></li>
<li><span class="MathJax" id="MathJax-Element-715-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8969" style="width: 2.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.365em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.721em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8970"><span class="mi" id="MathJax-Span-8971" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8972" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8973" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">v</span><span class="mi" id="MathJax-Span-8974" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-8975" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.903em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-715">X.val</script> corresponds to the count <span class="MathJax" id="MathJax-Element-710-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8936" style="width: 1.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.07em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.495em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8937"><span class="msubsup" id="MathJax-Span-8938"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8939" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-8940" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-710">m_i</script> of item <span class="MathJax" id="MathJax-Element-711-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8941" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.711em, 1000em, 2.714em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8942"><span class="mi" id="MathJax-Span-8943" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.863em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-711">i</script>.
<ul>
<li>Note that this requires a count in main memory so the number of <span class="MathJax" id="MathJax-Element-713-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8960" style="width: 0.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.676em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8961"><span class="mi" id="MathJax-Span-8962" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-713">X</script>s is limited.</li>
</ul>
</li>
<li>Our goal is to compute <span class="MathJax" id="MathJax-Element-716-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8976" style="width: 5.016em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.505em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.542em, 1000em, 3.008em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8977"><span class="mi" id="MathJax-Span-8978" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span class="mo" id="MathJax-Span-8979" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="munderover" id="MathJax-Span-8980" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-8981" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-8982" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-8983" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8984" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.653em; left: 0.732em;"><span class="mn" id="MathJax-Span-8985" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.732em;"><span class="mi" id="MathJax-Span-8986" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.377em; vertical-align: -0.402em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-716">S = \sum_i m_i^2</script>.</li>
</ul>
</li>
<li>How to set <span class="MathJax" id="MathJax-Element-715-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8969" style="width: 2.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.365em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.721em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8970"><span class="mi" id="MathJax-Span-8971" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8972" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8973" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">v</span><span class="mi" id="MathJax-Span-8974" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-8975" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.903em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-715">X.val</script>, <span class="MathJax" id="MathJax-Element-714-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8963" style="width: 2.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.858em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8964"><span class="mi" id="MathJax-Span-8965" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8966" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8967" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">e</span><span class="mi" id="MathJax-Span-8968" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-714">X.el</script>
<ul>
<li>Assume stream has length <span class="MathJax" id="MathJax-Element-699-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8845" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8846"><span class="mi" id="MathJax-Span-8847" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.625em; vertical-align: -0.072em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-699">n</script>.</li>
<li>Pick some random time <span class="MathJax" id="MathJax-Element-717-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8987" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.819em, 1000em, 2.714em, -0.469em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8988"><span class="mi" id="MathJax-Span-8989" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.743em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-717">t</script> uniformly over the life of the stream. Let <span class="MathJax" id="MathJax-Element-711-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8941" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.711em, 1000em, 2.714em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8942"><span class="mi" id="MathJax-Span-8943" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.863em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-711">i</script> be the item of the stream at time <span class="MathJax" id="MathJax-Element-717-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8987" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.819em, 1000em, 2.714em, -0.469em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8988"><span class="mi" id="MathJax-Span-8989" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.743em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-717">t</script>. Let <span class="MathJax" id="MathJax-Element-718-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8990" style="width: 3.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.491em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8991"><span class="mi" id="MathJax-Span-8992" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-8993" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-8994" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">e</span><span class="mi" id="MathJax-Span-8995" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span class="mo" id="MathJax-Span-8996" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-8997" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">i</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-718">X.el = i</script>.</li>
<li>Then, we maintian a count <span class="MathJax" id="MathJax-Element-719-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8998" style="width: 0.516em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.45em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8999"><span class="mi" id="MathJax-Span-9000" style="font-family: STIXGeneral-Italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-719">c</script> of the number of <span class="MathJax" id="MathJax-Element-711-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8941" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.711em, 1000em, 2.714em, -0.458em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8942"><span class="mi" id="MathJax-Span-8943" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.863em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-711">i</script>s in the stream starting from the chosen time <span class="MathJax" id="MathJax-Element-717-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8987" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.819em, 1000em, 2.714em, -0.469em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8988"><span class="mi" id="MathJax-Span-8989" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.743em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-717">t</script>. Set <span class="MathJax" id="MathJax-Element-720-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9001" style="width: 4.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.167em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.721em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9002"><span class="mi" id="MathJax-Span-9003" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-9004" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-9005" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">v</span><span class="mi" id="MathJax-Span-9006" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-9007" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span class="mo" id="MathJax-Span-9008" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-9009" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">c</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.903em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-720">X.val=c</script>.</li>
<li>Then, the estimate of the second moment <span class="MathJax" id="MathJax-Element-721-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9010" style="width: 2.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.646em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.205em, 1000em, 2.671em, -0.449em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-9011"><span class="munderover" id="MathJax-Span-9012"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9013" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-9014" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-9015" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9016" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.653em; left: 0.732em;"><span class="mn" id="MathJax-Span-9017" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.732em;"><span class="mi" id="MathJax-Span-9018" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.377em; vertical-align: -0.402em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-721">\sum_i m_i^2</script> is<br>
<div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-722-Frame" style=""><nobr><span class="math" id="MathJax-Span-9019" style="width: 10.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.572em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.687em, 1000em, 2.91em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9020"><span class="mi" id="MathJax-Span-9021" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span class="mo" id="MathJax-Span-9022" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-9023" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mo" id="MathJax-Span-9024" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9025" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-9026" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9027" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-9028" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">n</span><span class="mo" id="MathJax-Span-9029" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9030" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-9031" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋅</span><span class="mi" id="MathJax-Span-9032" style="font-family: STIXGeneral-Italic; padding-left: 0.25em;">c</span><span class="mo" id="MathJax-Span-9033" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9034" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9035" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.107em; vertical-align: -0.292em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-722">S = f(X) = n (2 \cdot c -1)</script></li>
<li>In reality, we will keep track of multiple <span class="MathJax" id="MathJax-Element-713-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8960" style="width: 0.766em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.676em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8961"><span class="mi" id="MathJax-Span-8962" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-713">X</script>s, <span class="MathJax" id="MathJax-Element-723-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9036" style="width: 7.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.588em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.459em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9037"><span class="mo" id="MathJax-Span-9038" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-9039"><span style="display: inline-block; position: relative; width: 1.101em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9040" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.632em;"><span class="mn" id="MathJax-Span-9041" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9042" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-9043" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.101em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9044" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.632em;"><span class="mn" id="MathJax-Span-9045" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9046" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-9047" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-9048" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-9049" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">.</span><span class="mo" id="MathJax-Span-9050" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">,</span><span class="msubsup" id="MathJax-Span-9051" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.045em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9052" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.632em;"><span class="mi" id="MathJax-Span-9053" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9054" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.072em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-723">(X_1, X_2, ..., X_k)</script> and our final estimate will be <span class="MathJax" id="MathJax-Element-724-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9055" style="width: 7.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.869em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.394em, 1000em, 3.145em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9056"><span class="mi" id="MathJax-Span-9057" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span><span class="mo" id="MathJax-Span-9058" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9059" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span><span class="texatom" id="MathJax-Span-9060"><span class="mrow" id="MathJax-Span-9061"><span class="mo" id="MathJax-Span-9062" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-9063" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span><span class="munderover" id="MathJax-Span-9064" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.37em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9065" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; clip: rect(1.657em, 1000em, 2.485em, -0.497em); top: -2.797em; left: 0.957em;"><span class="mi" id="MathJax-Span-9066" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.012em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.679em, 1000em, 2.624em, -0.594em); top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-9067" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-9068" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mo" id="MathJax-Span-9069" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-9070"><span style="display: inline-block; position: relative; width: 0.932em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.536em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9071" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.632em;"><span class="mi" id="MathJax-Span-9072" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9073" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.694em; vertical-align: -0.554em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-724">S = 1/k \sum_j^k f(X_j)</script>.</li>
</ul>
</li>
<li>Proof:
<ul>
<li>Let <span class="MathJax" id="MathJax-Element-725-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9074" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.586em, 1000em, 2.523em, -0.477em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-9075"><span class="msubsup" id="MathJax-Span-9076"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9077" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-9078" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.013em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.79em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-725">c_t</script> be the number of times item at time <span class="MathJax" id="MathJax-Element-717-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8987" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.819em, 1000em, 2.714em, -0.469em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8988"><span class="mi" id="MathJax-Span-8989" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.743em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-717">t</script> appears from time <span class="MathJax" id="MathJax-Element-717-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8987" style="width: 0.391em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.338em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.819em, 1000em, 2.714em, -0.469em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8988"><span class="mi" id="MathJax-Span-8989" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.743em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-717">t</script> onward.
<ul>
<li>(Slide Pic here)</li>
</ul>
</li>
<li>Then <span class="MathJax" id="MathJax-Element-726-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9079" style="width: 13.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.881em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.471em, 1000em, 3.054em, -0.508em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9080"><span class="mi" id="MathJax-Span-9081" style="font-family: STIXGeneral-Italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mo" id="MathJax-Span-9082" style="font-family: STIXGeneral-Regular;">[</span><span class="mi" id="MathJax-Span-9083" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mo" id="MathJax-Span-9084" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9085" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-9086" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9087" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-9088" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mfrac" id="MathJax-Span-9089" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.514em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.428em); top: -2.724em; left: 50%; margin-left: -0.197em;"><span class="mn" id="MathJax-Span-9090" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.828em, 1000em, 2.484em, -0.497em); top: -1.964em; left: 50%; margin-left: -0.197em;"><span class="mi" id="MathJax-Span-9091" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(0.831em, 1000em, 1.239em, -0.507em); top: -1.29em; left: 0em;"><span style="border-left-width: 0.514em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.07em;"></span></span></span></span><span class="munderover" id="MathJax-Span-9092" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 2.158em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9093" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; clip: rect(1.828em, 1000em, 2.484em, -0.497em); top: -2.797em; left: 0.957em;"><span class="mi" id="MathJax-Span-9094" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.485em, -0.48em); top: -2.012em; left: 0.957em;"><span class="texatom" id="MathJax-Span-9095"><span class="mrow" id="MathJax-Span-9096"><span class="mi" id="MathJax-Span-9097" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.013em;"></span></span><span class="mo" id="MathJax-Span-9098" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-9099" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-9100" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">n</span><span class="mo" id="MathJax-Span-9101" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9102" style="font-family: STIXGeneral-Regular;">2</span><span class="msubsup" id="MathJax-Span-9103"><span style="display: inline-block; position: relative; width: 0.751em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9104" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.45em;"><span class="mi" id="MathJax-Span-9105" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.013em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9106" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9107" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9108" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.507em; vertical-align: -0.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-726">E[f(X)] = \frac{1}{n} \sum_{t=1}^n n(2 c_t -1)</script>. This summation counts over the times of the stream, but we can rearrange it into an equivalent form that counts over the <em>items</em> of the stream <span class="MathJax" id="MathJax-Element-727-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9109" style="width: 21.016em; display: inline-block;"><span style="display: inline-block; position: relative; width: 18.919em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.471em, 1000em, 3.054em, -0.507em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9110"><span class="mfrac" id="MathJax-Span-9111"><span style="display: inline-block; position: relative; width: 0.514em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.428em); top: -2.724em; left: 50%; margin-left: -0.197em;"><span class="mn" id="MathJax-Span-9112" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.828em, 1000em, 2.484em, -0.497em); top: -1.964em; left: 50%; margin-left: -0.197em;"><span class="mi" id="MathJax-Span-9113" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(0.831em, 1000em, 1.239em, -0.507em); top: -1.29em; left: 0em;"><span style="border-left-width: 0.514em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.07em;"></span></span></span></span><span class="munderover" id="MathJax-Span-9114" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9115" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-9116" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-9117" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">n</span><span class="mo" id="MathJax-Span-9118" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋅</span><span class="mo" id="MathJax-Span-9119" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mo" id="MathJax-Span-9120" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9121" style="font-family: STIXGeneral-Regular;">2</span><span class="msubsup" id="MathJax-Span-9122"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9123" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-9124" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9125" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9126" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9127" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9128" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mo" id="MathJax-Span-9129" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-9130" style="font-family: STIXGeneral-Regular;">2</span><span class="msubsup" id="MathJax-Span-9131"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9132" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-9133" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9134" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9135" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">3</span><span class="mo" id="MathJax-Span-9136" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9137" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mo" id="MathJax-Span-9138" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋯</span><span class="mo" id="MathJax-Span-9139" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mn" id="MathJax-Span-9140" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">3</span><span class="mo" id="MathJax-Span-9141" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mn" id="MathJax-Span-9142" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9143" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.507em; vertical-align: -0.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-727">\frac{1}{n} \sum_i n \cdot ( (2m_i -1) +  (2m_i -3) + \cdots + 3 + 1)</script>. That is, when I first see the item I get <span class="MathJax" id="MathJax-Element-728-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9144" style="width: 3.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.266em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.86em, -0.478em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9145"><span class="mn" id="MathJax-Span-9146" style="font-family: STIXGeneral-Regular;">2</span><span class="msubsup" id="MathJax-Span-9147"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9148" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-9149" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9150" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9151" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.05em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-728">2m_i -1</script>, when I next see it I get <span class="MathJax" id="MathJax-Element-729-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9152" style="width: 3.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.266em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.86em, -0.478em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9153"><span class="mn" id="MathJax-Span-9154" style="font-family: STIXGeneral-Regular;">2</span><span class="msubsup" id="MathJax-Span-9155"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9156" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-9157" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9158" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9159" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">3</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.05em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-729">2m_i-3</script> and so on and so forth until when I last see it, I get 1.</li>
<li>So <span class="MathJax" id="MathJax-Element-730-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9160" style="width: 33.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 30.518em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.471em, 1000em, 3.054em, -0.508em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9161"><span class="mi" id="MathJax-Span-9162" style="font-family: STIXGeneral-Italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mo" id="MathJax-Span-9163" style="font-family: STIXGeneral-Regular;">[</span><span class="mi" id="MathJax-Span-9164" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mo" id="MathJax-Span-9165" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9166" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span class="mo" id="MathJax-Span-9167" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9168" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-9169" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mfrac" id="MathJax-Span-9170" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.514em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.428em); top: -2.724em; left: 50%; margin-left: -0.197em;"><span class="mn" id="MathJax-Span-9171" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.828em, 1000em, 2.484em, -0.497em); top: -1.964em; left: 50%; margin-left: -0.197em;"><span class="mi" id="MathJax-Span-9172" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(0.831em, 1000em, 1.239em, -0.507em); top: -1.29em; left: 0em;"><span style="border-left-width: 0.514em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.07em;"></span></span></span></span><span class="munderover" id="MathJax-Span-9173" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9174" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-9175" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-9176" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">n</span><span class="mo" id="MathJax-Span-9177" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋅</span><span class="mo" id="MathJax-Span-9178" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-9179" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9180" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mn" id="MathJax-Span-9181" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">3</span><span class="mo" id="MathJax-Span-9182" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mo" id="MathJax-Span-9183" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋯</span><span class="mo" id="MathJax-Span-9184" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mo" id="MathJax-Span-9185" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-9186" style="font-family: STIXGeneral-Regular;">2</span><span class="msubsup" id="MathJax-Span-9187"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9188" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.732em;"><span class="mi" id="MathJax-Span-9189" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9190" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9191" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9192" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9193" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9194" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mfrac" id="MathJax-Span-9195" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.514em; height: 0px; margin-right: 0.12em; margin-left: 0.12em;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.428em); top: -2.724em; left: 50%; margin-left: -0.197em;"><span class="mn" id="MathJax-Span-9196" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.828em, 1000em, 2.484em, -0.497em); top: -1.964em; left: 50%; margin-left: -0.197em;"><span class="mi" id="MathJax-Span-9197" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(0.831em, 1000em, 1.239em, -0.507em); top: -1.29em; left: 0em;"><span style="border-left-width: 0.514em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.07em;"></span></span></span></span><span class="munderover" id="MathJax-Span-9198" style="padding-left: 0.188em;"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9199" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-9200" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-9201" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">n</span><span class="mo" id="MathJax-Span-9202" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">⋅</span><span class="msubsup" id="MathJax-Span-9203" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9204" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.653em; left: 0.732em;"><span class="mn" id="MathJax-Span-9205" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.732em;"><span class="mi" id="MathJax-Span-9206" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9207" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="munderover" id="MathJax-Span-9208" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 1.257em; height: 0px;"><span style="position: absolute; clip: rect(1.548em, 1000em, 2.907em, -0.449em); top: -2.477em; left: 0em;"><span class="mo" id="MathJax-Span-9209" style="font-family: STIXGeneral-Regular; vertical-align: -0.002em;">∑</span><span style="display: inline-block; width: 0px; height: 2.477em;"></span></span><span style="position: absolute; top: -2.012em; left: 0.957em;"><span class="mi" id="MathJax-Span-9210" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9211" style="font-family: STIXGeneral-Regular; padding-left: 0.188em;">⋅</span><span class="msubsup" id="MathJax-Span-9212"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9213" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.653em; left: 0.732em;"><span class="mn" id="MathJax-Span-9214" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; clip: rect(1.677em, 1000em, 2.485em, -0.472em); top: -2.011em; left: 0.732em;"><span class="mi" id="MathJax-Span-9215" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9216" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-9217" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.008em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.507em; vertical-align: -0.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-730">E[f(X)] = \frac{1}{n} \sum_i n \cdot (1 + 3 + \cdots + (2m_i -1)) = \frac{1}{n} \sum_i n \cdot m_i^2 = \sum_i \cdot m_i^2 = S</script>, the second moment as desired!</li>
</ul>
</li>
<li>If we wish to estimate the <span class="MathJax" id="MathJax-Element-688-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8762" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.714em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8763"><span class="mi" id="MathJax-Span-8764" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-688">k</script>th moment, just change the function to sum over.
<ul>
<li>FOr k=2 use <span class="MathJax" id="MathJax-Element-731-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9218" style="width: 4.328em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.885em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9219"><span class="mi" id="MathJax-Span-9220" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-9221" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9222" style="font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-9223" style="font-family: STIXGeneral-Italic;">c</span><span class="mo" id="MathJax-Span-9224" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9225" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9226" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.072em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-731">n (2c-1)</script></li>
<li>for k=3 use <span class="MathJax" id="MathJax-Element-732-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9227" style="width: 7.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.475em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.524em, 1000em, 2.88em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9228"><span class="mi" id="MathJax-Span-9229" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-9230" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9231" style="font-family: STIXGeneral-Regular;">3</span><span class="msubsup" id="MathJax-Span-9232"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.477em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9233" style="font-family: STIXGeneral-Italic;">c</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="mn" id="MathJax-Span-9234" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9235" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9236" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">3</span><span class="mi" id="MathJax-Span-9237" style="font-family: STIXGeneral-Italic;">c</span><span class="mo" id="MathJax-Span-9238" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mn" id="MathJax-Span-9239" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="mo" id="MathJax-Span-9240" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.255em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-732">n (3 c^2 -3c +1)</script>, etc</li>
</ul>
</li>
</ul>
<h1>Notes</h1>
<p>(1)</p>
<h2>First Cut Solution</h2>
<ul>
<li>Given a set of keys S that we want to filter</li>
<li>reate a bit array B of n bits, itinally all 0. B can be very long (ie 8 billion bits).</li>
<li>Choose a has function h with range [0,n]</li>
<li>Hash each member of s in S to one of n bucksts and set that bit to 1 <span class="MathJax" id="MathJax-Element-733-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9241" style="width: 5.266em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.73em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.88em, -0.515em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9242"><span class="mi" id="MathJax-Span-9243" style="font-family: STIXGeneral-Italic;">B</span><span class="mo" id="MathJax-Span-9244" style="font-family: STIXGeneral-Regular;">[</span><span class="mi" id="MathJax-Span-9245" style="font-family: STIXGeneral-Italic;">h</span><span class="mo" id="MathJax-Span-9246" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9247" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-9248" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9249" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-9250" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9251" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.08em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-733">B[h(s)]=1</script></li>
<li>Hash each element a of the stream and output only those that hash that bit that was set to 1.</li>
<li>We get candidate values - create false positive but no false negatives.</li>
<li><strong>Example</strong>:
<ul>
<li>We have 1 billion email addresses and 8 billion bits. We hash each email address to a bit. Because hashes may overhap, a little less than 1/8 of the darts will be false positives. What's the exact number?</li>
<li>The exact number of false positives as a ratio of the whole is as follows: We have m darts and n targets. What is the probaility that a target gets at least one dart? <span class="MathJax" id="MathJax-Element-734-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9252" style="width: 21.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 19.651em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.484em, 1000em, 2.88em, -0.396em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9253"><span class="mn" id="MathJax-Span-9254" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9255" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mo" id="MathJax-Span-9256" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-9257" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9258" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9259" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="texatom" id="MathJax-Span-9260"><span class="mrow" id="MathJax-Span-9261"><span class="mo" id="MathJax-Span-9262" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-9263" style="font-family: STIXGeneral-Italic;">n</span><span class="msubsup" id="MathJax-Span-9264"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-9265" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="mi" id="MathJax-Span-9266" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9267" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9268" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span><span class="mo" id="MathJax-Span-9269" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mo" id="MathJax-Span-9270" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">(</span><span class="mn" id="MathJax-Span-9271" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9272" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="mn" id="MathJax-Span-9273" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span><span class="texatom" id="MathJax-Span-9274"><span class="mrow" id="MathJax-Span-9275"><span class="mo" id="MathJax-Span-9276" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-9277" style="font-family: STIXGeneral-Italic;">n</span><span class="msubsup" id="MathJax-Span-9278"><span style="display: inline-block; position: relative; width: 2.102em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-9279" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="texatom" id="MathJax-Span-9280"><span class="mrow" id="MathJax-Span-9281"><span class="mi" id="MathJax-Span-9282" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-9283" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">⋅</span><span class="mi" id="MathJax-Span-9284" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="texatom" id="MathJax-Span-9285"><span class="mrow" id="MathJax-Span-9286"><span class="mo" id="MathJax-Span-9287" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-9288" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9289" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9290" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">1</span><span class="mo" id="MathJax-Span-9291" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-9292" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 2.158em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.476em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9293" style="font-family: STIXGeneral-Italic;">e</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="texatom" id="MathJax-Span-9294"><span class="mrow" id="MathJax-Span-9295"><span class="mo" id="MathJax-Span-9296" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9297" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="texatom" id="MathJax-Span-9298"><span class="mrow" id="MathJax-Span-9299"><span class="mo" id="MathJax-Span-9300" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-9301" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.299em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-734">1-(1-1/n)^m =1-(1-1/n)^{n\cdot m/n} = 1-e^{-m/n}</script>. In our case, the value is <span class="MathJax" id="MathJax-Element-735-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9302" style="width: 8.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.827em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.524em, 1000em, 2.717em, -0.396em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9303"><span class="mn" id="MathJax-Span-9304" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9305" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-9306" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.989em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.476em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9307" style="font-family: STIXGeneral-Italic;">e</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="texatom" id="MathJax-Span-9308"><span class="mrow" id="MathJax-Span-9309"><span class="mo" id="MathJax-Span-9310" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-9311" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span class="texatom" id="MathJax-Span-9312"><span class="mrow" id="MathJax-Span-9313"><span class="mo" id="MathJax-Span-9314" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">/</span></span></span><span class="mn" id="MathJax-Span-9315" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">8</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9316" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9317" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">0.1175</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.074em; vertical-align: -0.078em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-735">1-e^{-1/8} = 0.1175</script>.</li>
<li></li>
</ul>
</li>
</ul>
<p>(2)</p>
<ul>
<li>For m = 1 billion, n = 8 billion, the optimal is at <span class="MathJax" id="MathJax-Element-736-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9318" style="width: 2.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.309em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.681em, 1000em, 2.717em, -0.493em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9319"><span class="mi" id="MathJax-Span-9320" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.017em;"></span></span><span class="mo" id="MathJax-Span-9321" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9322" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">6</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.9em; vertical-align: -0.078em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-736">k=6</script> where the prob of false positive is <span class="MathJax" id="MathJax-Element-737-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9323" style="width: 10.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.516em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.478em, 1000em, 2.88em, -0.459em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9324"><span class="mo" id="MathJax-Span-9325" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9326" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9327" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-9328" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 2.552em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.476em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9329" style="font-family: STIXGeneral-Italic;">e</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="texatom" id="MathJax-Span-9330"><span class="mrow" id="MathJax-Span-9331"><span class="mo" id="MathJax-Span-9332" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-9333" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">6</span><span class="mo" id="MathJax-Span-9334" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">⋅</span><span class="mn" id="MathJax-Span-9335" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span class="texatom" id="MathJax-Span-9336"><span class="mrow" id="MathJax-Span-9337"><span class="mo" id="MathJax-Span-9338" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">/</span></span></span><span class="mn" id="MathJax-Span-9339" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">8</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-9340"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-9341" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="mn" id="MathJax-Span-9342" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">6</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9343" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mn" id="MathJax-Span-9344" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">0.0216</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.306em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-737">(1-e^{-6 \cdot 1/8})^6 = 0.0216</script>, five times smaller than the naive value of <span class="MathJax" id="MathJax-Element-738-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9345" style="width: 3.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.322em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.677em, 1000em, 2.717em, -0.483em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9346"><span class="mn" id="MathJax-Span-9347" style="font-family: STIXGeneral-Regular;">0.01175</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.904em; vertical-align: -0.078em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-738">0.01175</script>!</li>
</ul>
<p>(3)</p>
<ul>
<li><strong>Proof</strong>
<ul>
<li>Intution: h(a) hashes a with equal prob to any of N values. So h(a) is a seeuqnce of <span class="MathJax" id="MathJax-Element-739-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9348" style="width: 2.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.534em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.944em, -0.466em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9349"><span class="mi" id="MathJax-Span-9350" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.001em;"></span></span><span class="mi" id="MathJax-Span-9351" style="font-family: STIXGeneral-Italic;">o</span><span class="msubsup" id="MathJax-Span-9352"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.909em, -0.499em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9353" style="font-family: STIXGeneral-Italic;">g</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.067em; left: 0.507em;"><span class="mn" id="MathJax-Span-9354" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mi" id="MathJax-Span-9355" style="font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.151em; vertical-align: -0.33em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-739">log_2 N</script> bits, where <span class="MathJax" id="MathJax-Element-740-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9356" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.464em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.312em, 1000em, 2.365em, -0.478em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-9357"><span class="msubsup" id="MathJax-Span-9358"><span style="display: inline-block; position: relative; width: 1.426em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9359" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="texatom" id="MathJax-Span-9360"><span class="mrow" id="MathJax-Span-9361"><span class="mo" id="MathJax-Span-9362" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9363" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.918em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-740">2^{-r}</script> fration of all <span class="MathJax" id="MathJax-Element-705-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8907" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8908"><span class="mi" id="MathJax-Span-8909" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-705">a</script>s have a tail of <span class="MathJax" id="MathJax-Element-741-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9364" style="width: 0.516em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.45em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.703em, -0.462em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9365"><span class="mi" id="MathJax-Span-9366" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.615em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-741">r</script> zeroes. It takes about <span class="MathJax" id="MathJax-Element-742-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9367" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.957em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.312em, 1000em, 2.365em, -0.478em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-9368"><span class="msubsup" id="MathJax-Span-9369"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9370" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9371" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.918em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-742">2^r</script> items before we see a value with <span class="MathJax" id="MathJax-Element-741-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9364" style="width: 0.516em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.45em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.703em, -0.462em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9365"><span class="mi" id="MathJax-Span-9366" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.615em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-741">r</script> trailing zeros.</li>
<li>Suppose <span class="MathJax" id="MathJax-Element-743-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9372" style="width: 0.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9373"><span class="mi" id="MathJax-Span-9374" style="font-family: STIXGeneral-Italic;">m</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.625em; vertical-align: -0.072em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-743">m</script> is the number of distinct elemtns so far. We show that the probability of finding a tail of <span class="MathJax" id="MathJax-Element-741-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9364" style="width: 0.516em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.45em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.703em, -0.462em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9365"><span class="mi" id="MathJax-Span-9366" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.615em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-741">r</script> zeroes goes to 1 if <span class="MathJax" id="MathJax-Element-744-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9375" style="width: 4.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.716em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.65em, 1000em, 2.727em, -0.495em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9376"><span class="mi" id="MathJax-Span-9377" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-9378" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&gt;<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">&gt;</span></span><span class="msubsup" id="MathJax-Span-9379" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9380" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9381" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.945em; vertical-align: -0.089em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-744">m >> 2^r</script> and goes to 0 if <span class="MathJax" id="MathJax-Element-745-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9382" style="width: 4.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.716em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.65em, 1000em, 2.727em, -0.495em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9383"><span class="mi" id="MathJax-Span-9384" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-9385" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&lt;<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">&lt;</span></span><span class="msubsup" id="MathJax-Span-9386" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9387" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9388" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.945em; vertical-align: -0.089em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-745">m << 2^r</script>, if <span class="MathJax" id="MathJax-Element-743-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9372" style="width: 0.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.712em, -0.495em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9373"><span class="mi" id="MathJax-Span-9374" style="font-family: STIXGeneral-Italic;">m</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.625em; vertical-align: -0.072em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-743">m</script> is the number of distinct elements seen so far in the stream.
<ul>
<li>The prob of NOT seeing a tail of length r among m distinct elements: <span class="MathJax" id="MathJax-Element-746-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9389" style="width: 18.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.273em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.456em, 1000em, 2.88em, -0.459em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9390"><span class="mo" id="MathJax-Span-9391" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-9392" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9393" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-9394" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.426em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9395" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="texatom" id="MathJax-Span-9396"><span class="mrow" id="MathJax-Span-9397"><span class="mo" id="MathJax-Span-9398" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9399" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-9400"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-9401" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="mi" id="MathJax-Span-9402" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9403" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mo" id="MathJax-Span-9404" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">(</span><span class="mn" id="MathJax-Span-9405" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-9406" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">−</span><span class="msubsup" id="MathJax-Span-9407" style="padding-left: 0.25em;"><span style="display: inline-block; position: relative; width: 1.426em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9408" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="texatom" id="MathJax-Span-9409"><span class="mrow" id="MathJax-Span-9410"><span class="mo" id="MathJax-Span-9411" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9412" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-9413"><span style="display: inline-block; position: relative; width: 3.116em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.478em); top: -2.534em; left: 0em;"><span class="mo" id="MathJax-Span-9414" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.338em;"><span class="texatom" id="MathJax-Span-9415"><span class="mrow" id="MathJax-Span-9416"><span class="msubsup" id="MathJax-Span-9417"><span style="display: inline-block; position: relative; width: 0.672em; height: 0px;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.309em; left: 0em;"><span class="mn" id="MathJax-Span-9418" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; top: -2.481em; left: 0.394em;"><span class="mi" id="MathJax-Span-9419" style="font-size: 50%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.011em;"></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span></span><span class="mo" id="MathJax-Span-9420" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9421" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="msubsup" id="MathJax-Span-9422"><span style="display: inline-block; position: relative; width: 1.01em; height: 0px;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.309em; left: 0em;"><span class="mn" id="MathJax-Span-9423" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; top: -2.481em; left: 0.394em;"><span class="texatom" id="MathJax-Span-9424"><span class="mrow" id="MathJax-Span-9425"><span class="mo" id="MathJax-Span-9426" style="font-size: 50%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9427" style="font-size: 50%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.011em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span></span><span class="mo" id="MathJax-Span-9428" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9429" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">≈</span><span class="msubsup" id="MathJax-Span-9430" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 2.609em; height: 0px;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.476em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-9431" style="font-family: STIXGeneral-Italic;">e</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.671em; left: 0.45em;"><span class="texatom" id="MathJax-Span-9432"><span class="mrow" id="MathJax-Span-9433"><span class="mo" id="MathJax-Span-9434" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9435" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="msubsup" id="MathJax-Span-9436"><span style="display: inline-block; position: relative; width: 1.01em; height: 0px;"><span style="position: absolute; clip: rect(1.662em, 1000em, 2.477em, -0.486em); top: -2.309em; left: 0em;"><span class="mn" id="MathJax-Span-9437" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; top: -2.481em; left: 0.394em;"><span class="texatom" id="MathJax-Span-9438"><span class="mrow" id="MathJax-Span-9439"><span class="mo" id="MathJax-Span-9440" style="font-size: 50%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-9441" style="font-size: 50%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.011em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.33em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-746">(1-2^{-r})^m = (1-2^{-r})^{2^r(m2^{-r})} \approx e^{-m2^{-r}}</script></li>
<li>If <span class="MathJax" id="MathJax-Element-745-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9382" style="width: 4.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.716em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.65em, 1000em, 2.727em, -0.495em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9383"><span class="mi" id="MathJax-Span-9384" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-9385" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&lt;<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">&lt;</span></span><span class="msubsup" id="MathJax-Span-9386" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9387" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9388" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.945em; vertical-align: -0.089em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-745">m << 2^r</script>, then the above probabilty tends to 1.</li>
<li>If <span class="MathJax" id="MathJax-Element-744-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9375" style="width: 4.141em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.716em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.65em, 1000em, 2.727em, -0.495em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9376"><span class="mi" id="MathJax-Span-9377" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-9378" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&gt;<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">&gt;</span></span><span class="msubsup" id="MathJax-Span-9379" style="padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9380" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9381" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.016em;"></span></span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.945em; vertical-align: -0.089em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-744">m >> 2^r</script>, then the above probability tends to 0.</li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>(4)</p>
<h2>First Cut Solution for Frajolet-Martin</h2>
<ul>
<li>Pick a hash function <span class="MathJax" id="MathJax-Element-747-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9442" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.507em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9443"><span class="mi" id="MathJax-Span-9444" style="font-family: STIXGeneral-Italic;">h</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.893em; vertical-align: -0.072em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-747">h</script> that maps each of the <span class="MathJax" id="MathJax-Element-703-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8897" style="width: 0.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.788em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.718em, -0.527em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8898"><span class="mi" id="MathJax-Span-8899" style="font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.866em; vertical-align: -0.079em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-703">N</script> elements to at least <span class="MathJax" id="MathJax-Element-704-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8900" style="width: 3.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.759em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.956em, -0.488em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8901"><span class="msubsup" id="MathJax-Span-8902"><span style="display: inline-block; position: relative; width: 1.82em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.921em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8903" style="font-family: STIXGeneral-Regular;">log</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.055em; left: 1.351em;"><span class="mn" id="MathJax-Span-8904" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-8905"></span><span class="mi" id="MathJax-Span-8906" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.164em; vertical-align: -0.344em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-704">\log_2 N</script> bits.</li>
<li>For each stream element <span class="MathJax" id="MathJax-Element-705-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8907" style="width: 0.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.563em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.924em, 1000em, 2.714em, -0.49em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-8908"><span class="mi" id="MathJax-Span-8909" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.627em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-705">a</script>, let <span class="MathJax" id="MathJax-Element-748-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9445" style="width: 1.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.633em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.88em, -0.462em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9446"><span class="mi" id="MathJax-Span-9447" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mo" id="MathJax-Span-9448" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9449" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-9450" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.072em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-748">r(a)</script> be the number of trailing 0s in <span class="MathJax" id="MathJax-Element-749-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9451" style="width: 1.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.745em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.88em, -0.488em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9452"><span class="mi" id="MathJax-Span-9453" style="font-family: STIXGeneral-Italic;">h</span><span class="mo" id="MathJax-Span-9454" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-9455" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-9456" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.08em; vertical-align: -0.259em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-749">h(a)</script> = position of first 1 counting from the right.</li>
<li>Record R = the maximum r(a) seen. Then the estimate of number of distinct elements seen is <span class="MathJax" id="MathJax-Element-750-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9457" style="width: 1.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.07em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.162em, 1000em, 2.365em, -0.478em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-9458"><span class="msubsup" id="MathJax-Span-9459"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9460" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9461" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.085em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-750">2^R</script>. Proof given in (3).</li>
<li>One problem with this formulation: <span class="MathJax" id="MathJax-Element-751-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9462" style="width: 2.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.365em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.5em, 1000em, 2.859em, -0.508em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9463"><span class="mi" id="MathJax-Span-9464" style="font-family: STIXGeneral-Italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mo" id="MathJax-Span-9465" style="font-family: STIXGeneral-Regular;">[</span><span class="msubsup" id="MathJax-Span-9466"><span style="display: inline-block; position: relative; width: 1.032em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9467" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.712em; left: 0.507em;"><span class="mi" id="MathJax-Span-9468" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span><span class="mo" id="MathJax-Span-9469" style="font-family: STIXGeneral-Regular;">]</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.258em; vertical-align: -0.236em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-751">E[2^R]</script> is actually infinite, as prob halves when <span class="MathJax" id="MathJax-Element-752-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9470" style="width: 5.516em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.955em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.744em, -0.52em); top: -2.534em; left: 0em;"><span class="mrow" id="MathJax-Span-9471"><span class="mi" id="MathJax-Span-9472" style="font-family: STIXGeneral-Italic;">R</span><span class="mo" id="MathJax-Span-9473" style="font-family: STIXGeneral-Regular;">−</span><span class="mo" id="MathJax-Span-9474" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&gt;</span><span class="mi" id="MathJax-Span-9475" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">R</span><span class="mo" id="MathJax-Span-9476" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">+</span><span class="mn" id="MathJax-Span-9477" style="font-family: STIXGeneral-Regular; padding-left: 0.25em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.921em; vertical-align: -0.108em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-752">R -> R+1</script> but value doubles. SO you can't just compute one hash function and take its value as the estimate. Workaround involves using many hash functions <span class="MathJax" id="MathJax-Element-692-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8786" style="width: 0.953em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.845em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.344em, 1000em, 2.523em, -0.488em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8787"><span class="msubsup" id="MathJax-Span-8788"><span style="display: inline-block; position: relative; width: 0.807em; height: 0px;"><span style="position: absolute; clip: rect(1.682em, 1000em, 2.712em, -0.488em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8789" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.507em;"><span class="mi" id="MathJax-Span-8790" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.058em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-692">h_i</script> and getting many samples of <span class="MathJax" id="MathJax-Element-708-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8928" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.957em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.374em, 1000em, 2.523em, -0.52em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8929"><span class="msubsup" id="MathJax-Span-8930"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8931" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.619em;"><span class="mi" id="MathJax-Span-8932" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.025em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-708">R_i</script>.
<ul>
<li>But how would the samples of <span class="MathJax" id="MathJax-Element-708-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-8928" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.957em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.374em, 1000em, 2.523em, -0.52em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-8929"><span class="msubsup" id="MathJax-Span-8930"><span style="display: inline-block; position: relative; width: 0.92em; height: 0px;"><span style="position: absolute; clip: rect(1.712em, 1000em, 2.703em, -0.52em); top: -2.534em; left: 0em;"><span class="mi" id="MathJax-Span-8931" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -2.159em; left: 0.619em;"><span class="mi" id="MathJax-Span-8932" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.025em; vertical-align: -0.238em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-708">R_i</script> by combined?
<ul>
<li><em>Average?</em>: Problematic. One term with very large value for <span class="MathJax" id="MathJax-Element-753-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-9478" style="width: 1.453em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.295em; height: 0px; font-size: 111%;"><span style="position: absolute; clip: rect(1.162em, 1000em, 2.365em, -0.478em); top: -2.196em; left: 0em;"><span class="mrow" id="MathJax-Span-9479"><span class="msubsup" id="MathJax-Span-9480"><span style="display: inline-block; position: relative; width: 1.254em; height: 0px;"><span style="position: absolute; clip: rect(1.689em, 1000em, 2.703em, -0.478em); top: -2.534em; left: 0em;"><span class="mn" id="MathJax-Span-9481" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.534em;"></span></span><span style="position: absolute; top: -4.401em; left: 0.507em;"><span class="texatom" id="MathJax-Span-9482"><span class="mrow" id="MathJax-Span-9483"><span class="msubsup" id="MathJax-Span-9484"><span style="display: inline-block; position: relative; width: 0.672em; height: 0px;"><span style="position: absolute; clip: rect(1.678em, 1000em, 2.477em, -0.516em); top: -2.309em; left: 0em;"><span class="mi" id="MathJax-Span-9485" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 2.309em;"></span></span><span style="position: absolute; top: -2.09em; left: 0.45em;"><span class="mi" id="MathJax-Span-9486" style="font-size: 50%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.196em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.085em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-753">2^{R_i}</script> will overpower the others.</li>
<li><em>Median?</em>: Problematic. All estimates are a power of two, error is large.</li>
<li>Soution: Partition your samples into small groups. Take the median of the groups, and then take the average of the medians.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div>
    </body>
    </html>
  